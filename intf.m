img = imread('lena.tiff');
img = rgb2gray(img);
 
intf1 = flip(double(img)*0.1); %?????????ú??????????????・?±???0.1??0.2??0.5
intf2 = flip(double(img)*0.2);
intf3 = flip(double(img)*0.5);
img_intf1 = double(img) + intf1;
img_intf2 = double(img) + intf2;
img_intf3 = double(img) + intf3;
 
J1 = abs(0.8*log(1+img_intf1*0.8)+0.2);
J2 = abs(0.9*log(1+img_intf2*0.9).^1.2+0.2);
minus = img_intf3>0.76 ;
lambda = double(img_intf3 + flip(img_intf3))./double(img + flip(img))
J3 = img_intf3 - double(flip(img)).*lambda
imshow(J3)
 
img = double(img);
power_img = sum(img(:).^2);
snr1_b = 10*log10(power_img/sum(intf1(:).^2));      %%snr=?à??????????????・???/?¨???ù??????????-?à??????????????????・???
a = J1 - img;
power_noise1 = sum(a(:).^2);
snr1_a = 10*log10(power_img/power_noise1);
 
noise2 = double(img_intf2) - double(img);
snr2_b = 10*log10(power_img/sum(intf2(:).^2));      %%snr=?à??????????????・???/?¨???ù??????????-?à??????????????????・???
a = J2 - img;
power_noise2 = sum(a(:).^2);
snr2_a = 10*log10(power_img/power_noise2);
 
noise3 = double(img_intf3) - double(img);
snr3_b = 10*log10(power_img/sum(intf3(:).^2));      %%snr=?à??????????????・???/?¨???ù??????????-?à??????????????????・???
a = J3 - img;
power_noise3 = sum(a(:).^2);
snr3_a = 10*log10(power_img/power_noise3);
 
disp('信噪比：去噪前-->去噪后:(dB)')
disp(['snr1:',num2str(snr1_b),'-->',num2str(snr1_a)])
disp(['snr2:',num2str(snr2_b),'-->',num2str(snr2_a)])
disp(['snr3:',num2str(snr3_b),'-->',num2str(snr3_a)])


